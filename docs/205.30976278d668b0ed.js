"use strict";(self.webpackChunkarena_of_choices=self.webpackChunkarena_of_choices||[]).push([[205],{205:(St,Z,p)=>{p.r(Z),p.d(Z,{HomeComponent:()=>P});var h=p(6895),e=p(4650);class m{constructor(t){this.el=t,this.animationRunning=!1}ngAfterViewInit(){this.createHackerEffect(this.el)}onMouseEnter(){this.createHackerEffect(this.el)}onMouseLeave(){this.animationRunning=!1}createHackerEffect(t){if(this.animationRunning)return;let n=0;const s=t.nativeElement.dataset.value,o=setInterval(()=>{this.animationRunning=!0,t.nativeElement.innerText=s.split("").map((c,l)=>l<n?c:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(26*Math.random())]).join(""),n>s.length&&(clearInterval(o),this.animationRunning=!1),n+=.5},30)}}m.\u0275fac=function(t){return new(t||m)(e.Y36(e.SBq))},m.\u0275dir=e.lG2({type:m,selectors:[["","arenaOfChoicesHackerEffect",""]],hostBindings:function(t,i){1&t&&e.NdJ("mouseenter",function(){return i.onMouseEnter()})("mouseleave",function(){return i.onMouseLeave()})},standalone:!0});const K=["header"];class _{}_.\u0275fac=function(t){return new(t||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["arena-of-choices-landing-section"]],viewQuery:function(t,i){if(1&t&&e.Gf(K,5),2&t){let n;e.iGM(n=e.CRH())&&(i.header=n.first)}},standalone:!0,features:[e.jDz],decls:6,vars:0,consts:[[1,"landing-section"],[1,"landing-section__info"],[1,"landing-section__info-header"],["data-value","TOO MANY CHOICES?","arenaOfChoicesHackerEffect","",1,"landing-section__header"],["header",""]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3,4),e._uU(5," TOO MANY CHOICES? "),e.qZA()()()())},dependencies:[h.ez,m],styles:[".landing-section[_ngcontent-%COMP%]{background-color:inherit;height:100svh;color:#000;display:flex;flex-direction:column;text-align:center;cursor:default}.landing-section__info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;flex-grow:1;transition:1s;overflow:auto;position:relative}.landing-section__info-header[_ngcontent-%COMP%]{font-size:clamp(2rem,5vw + 1rem,3rem);max-height:100%;display:flex;align-items:center;justify-content:center}"],changeDetection:0});class u{constructor(){this.assetFolderPath="./assets/choice-tool-assets",this.characters=["woody","justin","henry","firzen"],this.assets={woodyAssets:[],henryAssets:[],firzenAssets:[],justinAssets:[],background:null,damageSplats:[]},this.loadAssets()}loadAssets(){const t=new Image;t.src=this.assetFolderPath+"/woody-assets/woody1.png";const i=new Image;i.src=this.assetFolderPath+"/woody-assets/woody2.png",this.assets.woodyAssets=[t,i];const n=new Image;n.src=this.assetFolderPath+"/firzen-assets/firzen1.png";const s=new Image;s.src=this.assetFolderPath+"/firzen-assets/firzen2.png",this.assets.firzenAssets=[n,s];const o=new Image;o.src=this.assetFolderPath+"/henry-assets/henry1.png";const c=new Image;c.src=this.assetFolderPath+"/henry-assets/henryAttacking.png";const l=new Image;l.src=this.assetFolderPath+"/henry-assets/henry2.png",this.assets.henryAssets=[o,c,l];const E=new Image;E.src=this.assetFolderPath+"/justin-assets/justin1.png";const H=new Image;H.src=this.assetFolderPath+"/justin-assets/justin2.png",this.assets.justinAssets=[E,H];const F=new Image;F.src=this.assetFolderPath+"/bg1.png",this.assets.background=F;const j=new Image,z=new Image,$=new Image;j.src=this.assetFolderPath+"/dmgsplat_red.png",z.src=this.assetFolderPath+"/dmgsplat_blue.png",$.src=this.assetFolderPath+"/dmgsplat_maxhit.png",this.assets.damageSplats=[j,z,$]}getAllCharacterAssets(){return this.assets}getCharacterAssets(t){switch(t){case"woody":return this.assets.woodyAssets;case"henry":return this.assets.henryAssets;case"firzen":return this.assets.firzenAssets;case"justin":return this.assets.justinAssets;default:return null}}getRandomCharacterAsset(){return this.characters[Math.floor(Math.random()*this.characters.length)]}}u.\u0275fac=function(t){return new(t||u)},u.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"});var Q=p(5412);class d extends Q.m1{constructor(){super({choices:[],choiceStats:[],view:"choice",generateCharacters:!1,gameFinished:!1,choiceResults:[]}),this.choices$=this.select(t=>t.choices),this.choiceStats$=this.select(t=>t.choiceStats),this.view$=this.select(t=>t.view),this.generateCharacters$=this.select(t=>t.generateCharacters),this.gameFinished$=this.select(t=>t.gameFinished),this.choiceResults$=this.select(t=>t.choiceResults),this.addChoice=this.updater((t,i)=>({...t,choices:[i,...t.choices]})),this.updateChoiceStats=this.updater((t,i)=>({...t,choiceStats:[...i]})),this.removeChoiceById=this.updater((t,i)=>{const n=t.choices.findIndex(s=>s.id===i);return t.choices.splice(n,1),{...t,choices:[...t.choices]}}),this.addChoiceResult=this.updater((t,i)=>({...t,choiceResults:[i,...t.choiceResults]})),this.updateChoiceResults=this.updater((t,i)=>({...t,choiceResults:[...i]})),this.updateView=this.updater((t,i)=>({...t,view:i})),this.updateGenerateCharacters=this.updater((t,i)=>({...t,generateCharacters:i})),this.updateGameFinished=this.updater((t,i)=>({...t,gameFinished:i}))}}d.\u0275fac=function(t){return new(t||d)},d.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac});var g=(()=>{return(a=g||(g={})).RIGHT="right",a.LEFT="left",g;var a})(),r=(()=>{return(a=r||(r={})).WAITING="waiting",a.RUNNING="running",a.KNOCKBACKED="knockedBack",a.ATTACKING="attacking",a.WINNING="winning",a.DEAD="dead",r;var a})();class N{constructor(t,i,n,s,o,c,l){this.gameHeight=i,this.gameWidth=t,this.id=o,this.height=80,this.width=80,this.name=n,this.nameLength=l.measureText(this.name).width,this.imageTimer=0,this.imageTimerMax=125,this.border=0,this.spacing=0,this.row=0,this.col=0,this.assets=c,this.facing=Math.random()>.5?g.RIGHT:g.LEFT,this.speed=75,this.maxSpeed=100,this.velocity={x:50,y:50},this.goal={x:0,y:0},this.position=s,this.status=r.WAITING,this.time=0,this.attackTimer=0,this.attackCD=900,this.maxHealth=100,this.health=100,this.dmg=15,this.dmgDealt=0}draw(t,i){t.fillStyle="#f00",t.fillText(this.name,this.position.x-this.nameLength/2+40,this.position.y+this.height+20),this.status!=r.DEAD&&(this.drawHealth(t),this.drawAttackCD(t)),this.drawSprite(t,this.status,i,this.width,this.height)}drawHealth(t){t.fillStyle="lime",t.font="20px Arial",t.fillRect(this.position.x,this.position.y+this.height+35,this.health/this.maxHealth*this.width,10),t.fillText(this.health+" HP",this.position.x,this.position.y+this.height+35)}drawAttackCD(t){t.fillStyle="blue",t.fillRect(this.position.x,this.position.y+this.height+50,this.attackTimer/this.attackCD*this.width,10)}drawSprite(t,i,n,s,o){let c;switch(this.imageTimer+=n,i){case r.WAITING:c=this.getSpriteConstantLoop(r.WAITING),this.drawOntoCanvas(t,c,this.image,s,o);break;case r.RUNNING:c=this.getSpriteConstantLoop(r.RUNNING),this.drawOntoCanvas(t,c,this.image,s,o);break;case r.ATTACKING:c=this.getSpriteOneLoop(r.ATTACKING),this.drawOntoCanvas(t,c,this.imageAttacking,s,o);break;case r.KNOCKBACKED:c=this.getSpriteOneLoop(r.KNOCKBACKED),this.drawOntoCanvas(t,c,this.image,s,o);break;case r.WINNING:c=this.getSpriteConstantLoop(r.WINNING),t.fillStyle="fuchsia",t.fillText("WINNER",this.position.x+this.width/2-t.measureText("WINNER").width/2,this.position.y-10),this.drawOntoCanvas(t,c,this.imageWinning,s,o);break;case r.DEAD:c=this.getSpriteOneLoop(r.DEAD),this.drawOntoCanvas(t,c,this.image,s,o)}this.imageTimer>this.imageTimerMax&&(this.col+=1,this.imageTimer=0)}drawSpriteCard(t,i,n,s,o){let c;switch(this.imageTimer+=n,i){case r.WAITING:c=this.getSpriteConstantLoop(r.WAITING),this.drawOntoCanvas(t,c,this.image,s,o);break;case r.RUNNING:c=this.getSpriteConstantLoop(r.RUNNING),this.drawOntoCanvas(t,c,this.image,s,o);break;case r.ATTACKING:c=this.getSpriteConstantLoop(r.ATTACKING),this.drawOntoCanvas(t,c,this.imageAttacking,s,o);break;case r.KNOCKBACKED:c=this.getSpriteConstantLoop(r.KNOCKBACKED),this.drawOntoCanvas(t,c,this.image,s,o);break;case r.WINNING:c=this.getSpriteConstantLoop(r.WINNING),t.fillStyle="fuchsia",t.fillText("WINNER",this.position.x+this.width/2-t.measureText("WINNER").width/2,this.position.y-10),this.drawOntoCanvas(t,c,this.imageWinning,s,o);break;case r.DEAD:c=this.getSpriteOneLoop(r.DEAD),this.drawOntoCanvas(t,c,this.image,s,o)}this.imageTimer>this.imageTimerMax&&(this.col+=1,this.imageTimer=0)}drawOntoCanvas(t,i,n,s,o){this.facing==g.RIGHT?t.drawImage(n,i.x,i.y,80,80,this.position.x,this.position.y,s,o):(t.scale(-1,1),t.drawImage(n,i.x,i.y,80,80,-this.position.x-this.width,this.position.y,s,o),t.scale(-1,1))}spritePositionToImagePosition(t,i){return{x:this.border+t*(this.spacing+this.width),y:this.border+i*(this.spacing+this.height)}}getSpriteConstantLoop(t){return this.col===this.spriteDict[t][1][0]&&(this.col=this.spriteDict[t][0][0]),this.spritePositionToImagePosition(this.col,this.row)}getSpriteOneLoop(t){return this.col===this.spriteDict[t][1][0]&&(this.col=this.spriteDict[t][1][0]-1),this.spritePositionToImagePosition(this.col,this.row)}setSprite(t){this.col=this.spriteDict[t][0][0],this.row=this.spriteDict[t][0][1]}getName(){return this.name}getPosition(){return this.position}setPosition(t,i){this.position.x=t,this.position.y=i}addPosition(t,i){this.position.x+=t,this.position.y+=i}getVelocity(){return this.velocity}setVX(t){this.velocity.x=t}multiplyVX(t){this.velocity.x*=t}setVY(t){this.velocity.y=t}multiplyVY(t){this.velocity.y*=t}getHeight(){return this.height}getWidth(){return this.width}getGoal(){return this.goal}getTimeKnockedback(){return this.time}addTimeKnockedback(t){this.time+=t}setTimeKnockedback(t){this.time=t}minusHealth(t){this.health-=t}isDead(){return this.health<=0}getAttackTimer(){return this.attackTimer}setAttackTimer(t){this.attackTimer=t}cooldownAttackTimer(t){this.attackTimer-t<0?this.attackTimer=0:this.attackTimer-=t}getTimeForAttackAnimation(){return this.timeforAttackAnimation}getID(){return this.id}getFacing(){return this.facing}setFacing(t){this.facing=t}setStatus(t){this.status=t}getStatus(){return this.status}getDmg(){return this.dmg}keepInside(){this.position.x<=1&&(this.position.x=5,this.velocity.x=0),this.position.x>=this.gameWidth-this.width-1&&(this.position.x=this.gameWidth-this.width-5,this.velocity.x=0),this.position.y<=80&&(this.position.y=81,this.velocity.y=0),this.position.y>=this.gameHeight-this.height-1&&(this.position.y=this.gameHeight-this.height-5,this.velocity.y=0)}getClosestEnemy(t){let i,n=999999;for(let s=0;s<t.length;s++){const o=this.getDist(t[s]);o<n&&t[s].getID()!=this.id&&t[s].getStatus()!=r.KNOCKBACKED&&(n=o,i=t[s])}return i}setGoal(t){null!=t?this.goal=t.getPosition():(this.goal={x:this.position.x,y:this.position.y},this.velocity.x=0,this.velocity.y=0)}getDist(t){const i=t.getPosition(),n=Math.pow(this.position.x-i.x,2),s=Math.pow(this.position.y-i.y,2);return Math.pow(n+s,.5)}getUnitVector(){const t=this.goal.x-this.position.x,i=this.goal.y-this.position.y,n=Math.pow(Math.pow(t,2)+Math.pow(i,2),.5);return{x:t/n,y:i/n}}updateVelocities(){if(0!=this.goal.x-this.position.x&&0!=this.goal.y-this.position.y){const n=this.getUnitVector();this.velocity.x=n.x*this.speed,this.velocity.y=n.y*this.speed}}updateDirection(){this.velocity.x<0?this.facing=g.LEFT:this.velocity.x>0&&(this.facing=g.RIGHT)}hit(t,i){if(this.status!==r.ATTACKING){t.setTimeKnockedback(i);const n=t.getVelocity();t.addPosition(-10*Math.sign(n.x),-10*Math.sign(n.y)),t.setVX(-7.5*n.x+(Math.floor(5*Math.random())*Math.random()<.5?-1:1)),t.setVY(-7.5*n.y+(Math.floor(5*Math.random())*Math.random()<.5?-1:1)),this.attackTimer=this.attackCD}}}class D extends N{constructor(t,i,n,s,o,c,l){super(t,i,n,s,o,c,l),this.image=this.assets[0],this.imageAttacking=this.assets[0],this.imageWinning=this.assets[1],this.characterType="firzen",this.spriteDict={running:[[0,2],[3,2]],knockedBack:[[0,3],[5,3]],attacking:[[4,1],[7,1]],winning:[[4,0],[10,0]],dead:[[0,3],[5,3]],waiting:[[0,0],[4,0]]},this.timeforAttackAnimation=.5*(this.attackCD-(this.spriteDict.attacking[1][0]-this.spriteDict.attacking[0][0])*this.imageTimerMax),this.timeforAttackAnimation<=0&&console.log("ERROR 0 for timeForAttackAnimation")}}class L extends N{constructor(t,i,n,s,o,c,l){super(t,i,n,s,o,c,l),this.image=this.assets[0],this.imageAttacking=this.assets[1],this.imageWinning=this.assets[2],this.characterType="henry",this.spriteDict={running:[[0,2],[3,2]],knockedBack:[[0,3],[5,3]],attacking:[[0,0],[4,0]],winning:[[0,0],[4,0]],dead:[[0,3],[5,3]],waiting:[[0,0],[4,0]]},this.timeforAttackAnimation=.5*(this.attackCD-(this.spriteDict.attacking[1][0]-this.spriteDict.attacking[0][0])*this.imageTimerMax),this.timeforAttackAnimation<=0&&console.log("ERROR 0 for timeForAttackAnimation")}}class G extends N{constructor(t,i,n,s,o,c,l){super(t,i,n,s,o,c,l),this.image=this.assets[0],this.imageAttacking=this.assets[1],this.imageWinning=this.assets[0],this.characterType="justin",this.spriteDict={running:[[0,2],[3,2]],knockedBack:[[0,3],[5,3]],attacking:[[0,1],[7,1]],winning:[[2,4],[6,4]],dead:[[0,3],[5,3]],waiting:[[0,0],[4,0]]},this.timeforAttackAnimation=.5*(this.attackCD-(this.spriteDict.attacking[1][0]-this.spriteDict.attacking[0][0])*this.imageTimerMax),this.timeforAttackAnimation<=0&&console.log("ERROR 0 for timeForAttackAnimation")}}class R extends N{constructor(t,i,n,s,o,c,l){super(t,i,n,s,o,c,l),this.image=this.assets[0],this.imageAttacking=this.assets[0],this.imageWinning=this.assets[1],this.characterType="woody",this.spriteDict={running:[[0,2],[3,2]],knockedBack:[[0,3],[5,3]],attacking:[[0,1],[3,1]],winning:[[1,3],[10,3]],dead:[[0,3],[5,3]],waiting:[[0,0],[4,0]]},this.timeforAttackAnimation=.5*(this.attackCD-(this.spriteDict.attacking[1][0]-this.spriteDict.attacking[0][0])*this.imageTimerMax),this.timeforAttackAnimation<=0&&console.log("ERROR 0 for timeForAttackAnimation")}}class U{constructor(t,i,n,s){this.pos=t,this.damage=i,this.assets=n,this.time=0,this.width=40,this.height=40,this.maxHit=s}updateTime(t){this.time+=t}getTime(){return this.time}draw(t){t.drawImage(0==this.damage?this.assets[1]:this.maxHit?this.assets[2]:this.assets[0],this.pos.x,this.pos.y),t.fillStyle="white",t.fillText(""+this.damage,this.pos.x+this.width/2-t.measureText(""+this.damage).width/2,this.pos.y+this.height/2+5)}}class W{constructor(t,i,n){this.objectIndex1=t,this.objectIndex2=i,this.time=n}getObj1(){return this.objectIndex1}getObj2(){return this.objectIndex2}getTime(){return this.time}}var Y=p(727);const J=["canvas"];function q(a,t){1&a&&(e.TgZ(0,"div"),e._uU(1,"Start Game"),e.qZA())}function B(a,t){1&a&&(e.TgZ(0,"div"),e._uU(1,"Reset Game"),e.qZA())}class C{constructor(t,i){this.assetManager=t,this.choiceToolStore=i,this.choices=[],this.MIN_STEP=10,this.SPRITE_HEIGHT=80,this.players=0,this.lastTime=0,this.assets={woodyAssets:[],henryAssets:[],firzenAssets:[],justinAssets:[],background:new Image,damageSplats:[]},this.typicalFrame=16,this.smallestFrame=14,this.longestFrame=50,this.names=[],this.characterList=[],this.beginning=[],this.choiceStats=[],this.deathListNames=[],this.deathListObjects=[],this.damageSplats=[],this.GAME_WIDTH=960,this.GAME_HEIGHT=720,this.locations=[],this.waiting=!0,this.subs=new Y.w0,this.view$=this.choiceToolStore.view$,this.gameFinished$=this.choiceToolStore.gameFinished$}ngOnInit(){this.ctx=this.canvas.nativeElement.getContext("2d"),this.ctx?.clearRect(0,0,this.canvas.nativeElement.width,this.canvas.nativeElement.height),this.assets=this.assetManager.getAllCharacterAssets(),this.gameLoop(0),this.subs.add(this.choiceToolStore.choices$.subscribe(t=>this.choices=t)),this.subs.add(this.choiceToolStore.generateCharacters$.subscribe(t=>{t&&this.onLoadIn()}))}ngOnDestroy(){this.subs.unsubscribe()}updateView(){this.choiceToolStore.updateView("choice")}onLoadIn(){this.resetGame(),this.locations=this.generateGridLocations(4,6).map(t=>({x:180*t.x,y:160*t.y})),this.characterList=[...this.generateCharacters()],this.choiceStats=[...this.generateChoiceStats(this.characterList)],this.choiceToolStore.updateChoiceStats(this.choiceStats),this.players=this.beginning.length}onStart(){if(this.waiting){for(let t=0;t<this.choices.length;t++)this.characterList[t].setStatus(r.RUNNING),this.characterList[t].setSprite(r.RUNNING);this.waiting=!1}else this.waiting=!0,this.resetGame(),this.locations=this.generateGridLocations(4,6).map(t=>({x:180*t.x,y:160*t.y})),this.characterList=[...this.generateCharacters()],this.choiceStats=[...this.generateChoiceStats(this.characterList)],this.choiceToolStore.updateChoiceStats(this.choiceStats),this.players=this.beginning.length}generateGridLocations(t,i){const n=[];for(let s=1;s<t;s++)for(let o=0;o<i;o++)n.push({x:o,y:s});return this.shuffleArray(n),n}generateCharacters(){const t=[];for(let i=0;i<this.choices.length;i++){const n=this.choices[i],s=this.locations.pop(),o=this.createNewCharacter(n,s,i);o.setSprite(r.WAITING),t.push(o)}return t}generateChoiceStats(t){const i=[];for(const n of t){const s={id:n.id,choice:n.name,health:n.health,maxHealth:n.maxHealth,characterType:n.characterType,images:this.assetManager.getCharacterAssets(n.characterType),state:r.WAITING};i.push(s)}return i}shuffleArray(t){for(let i=t.length-1;i>0;i--){const n=Math.floor(Math.random()*(i+1));[t[i],t[n]]=[t[n],t[i]]}}createNewCharacter(t,i,n){switch(t.type){case"woody":return new R(this.GAME_WIDTH,this.GAME_HEIGHT,t.name,i,n,this.assets.woodyAssets,this.ctx);case"firzen":return new D(this.GAME_WIDTH,this.GAME_HEIGHT,t.name,i,n,this.assets.firzenAssets,this.ctx);case"henry":return new L(this.GAME_WIDTH,this.GAME_HEIGHT,t.name,i,n,this.assets.henryAssets,this.ctx);default:return new G(this.GAME_WIDTH,this.GAME_HEIGHT,t.name,i,n,this.assets.justinAssets,this.ctx)}}resetGame(){this.beginning=[],this.deathListNames=[],this.deathListObjects=[],this.characterList=[],this.damageSplats=[],this.choiceToolStore.updateGameFinished(!1),this.choiceToolStore.updateChoiceResults([])}gameLoop(t){let i=t-this.lastTime;i>this.longestFrame&&(i=this.typicalFrame),this.lastTime=t,this.ctx.clearRect(0,0,this.canvas.nativeElement.width,this.canvas.nativeElement.height),this.updateGame(i);const n=this.gameLoop.bind(this);requestAnimationFrame(n)}updateGame(t){let i=t;do{this.waiting||this.resolveAllCollisions(i),this.drawAllElements(i),i=t-=i}while(t>0)}resolveAllCollisions(t){const i=this.findFirstCollision(t);null!=i?(t=Math.max(i.getTime(),this.MIN_STEP),this.updateObjects(t),this.handleCollisions(t)):this.updateObjects(t)}drawAllElements(t){this.ctx.drawImage(this.assets.background,0,0);for(let i=0;i<this.deathListObjects.length;i++)this.deathListObjects[i].draw(this.ctx,t);for(let i=0;i<this.characterList.length;i++)this.characterList[i].draw(this.ctx,t);for(let i=0;i<this.damageSplats.length;i++)this.damageSplats[i].draw(this.ctx),this.damageSplats[i].updateTime(t),this.damageSplats[i].getTime()>2e3&&(this.damageSplats.splice(i,1),i--);1==this.characterList.length&&this.characterList[0].getStatus()!=r.WINNING&&(this.characterList[0].setSprite(r.WINNING),this.characterList[0].setStatus(r.WINNING),this.choiceToolStore.updateGameFinished(!0),this.choiceToolStore.addChoiceResult({id:this.characterList[0].id,name:this.characterList[0].name,characterType:this.characterList[0].characterType,dmgDealt:this.characterList[0].dmgDealt,deathNumber:this.deathListNames.length+1,images:this.characterList[0].assets}))}updateObjects(t){const i=[];if(1!==this.characterList.length){for(let n=0;n<this.characterList.length;n++){const s=this.characterList[n],o=s.getPosition(),c=s.getVelocity();s.keepInside(),s.cooldownAttackTimer(t),s.isDead()?(this.deathListNames.push(s.getName()),s.setStatus(r.DEAD),this.deathListObjects.push(s),this.characterList.splice(n,1),n--,this.choiceToolStore.addChoiceResult({id:s.id,name:s.name,characterType:s.characterType,dmgDealt:s.dmgDealt,deathNumber:this.deathListNames.length,images:s.assets})):(s.getStatus()==r.KNOCKBACKED?(s.setVX(.95*c.x),s.setVY(.95*c.y),s.setPosition(o.x+t*c.x/1e3,o.y+t*c.y/1e3),s.addTimeKnockedback(t),s.getTimeKnockedback()>1e3&&(s.setStatus(r.RUNNING),s.setSprite(r.RUNNING),s.setTimeKnockedback(0))):(s.setGoal(s.getClosestEnemy(this.characterList)),s.updateVelocities(),s.setPosition(o.x+t*c.x/1e3,o.y+t*c.y/1e3)),s.getAttackTimer()<s.getTimeForAttackAnimation()&&s.getStatus()===r.ATTACKING&&(s.setSprite(r.RUNNING),s.setStatus(r.RUNNING)),s.getStatus()===r.RUNNING&&s.updateDirection(),i.push({id:s.id,choice:s.getName(),health:s.health,maxHealth:s.maxHealth,characterType:s.characterType,images:s.assets,state:s.status}))}this.choiceToolStore.updateChoiceStats(this.sortChoiceStats(i))}}updateVelocities(t,i){const n=t.getObj1(),s=t.getObj2(),o=Math.floor(16*Math.random()),c=s.getDmg()===o;if(null!==n&&null!==s&&n.getStatus()!==r.KNOCKBACKED&&s.getStatus()!==r.KNOCKBACKED){if(0===n.getAttackTimer()&&0!==s.getAttackTimer())return n.hit(s,i),this.updateStatus(n,s),this.updateHealth(s,o),this.updateDmgDealt(n,o),[s,o,c];if(0!=n.getAttackTimer()&&0==s.getAttackTimer())return s.hit(n,i),this.updateStatus(s,n),this.updateHealth(n,o),this.updateDmgDealt(s,o),[n,o,c];if(0==n.getAttackTimer()&&0==s.getAttackTimer())return 0==Math.floor(2*Math.random())?(n.hit(s,i),this.updateStatus(n,s),this.updateHealth(s,o),this.updateDmgDealt(n,o),[s,o,c]):(s.hit(n,i),this.updateStatus(s,n),this.updateHealth(n,o),this.updateDmgDealt(s,o),[n,o,c])}}handleCollisions(t){const i=this.findAllCollisions(t),n=[],s=[];for(let o=0;o<i.length;o++){const c=i[o].getObj1(),l=i[o].getObj2();!s.includes(c.getID())&&!s.includes(l.getID())&&(s.push(c.getID()),s.push(l.getID()),n.push(i[o]))}for(const o of n){const c=this.updateVelocities(o,t);void 0!==c&&this.createDamageSplats(c[0].getPosition(),c[1],c[2])}}findAllCollisions(t){const i=[];for(let n=0;n<this.characterList.length;n++)for(let s=n+1;s<this.characterList.length;s++){const o=this.findCollision(n,s,t);null!=o&&i.push(o)}return i}findFirstCollision(t){for(let i=0;i<this.characterList.length;i++)for(let n=i+1;n<this.characterList.length;n++){const s=this.findCollision(i,n,t);if(null!=s)return s}}findCollision(t,i,n){const s=this.characterList[t],o=this.characterList[i],c=s.getPosition(),l=o.getPosition();return c.x<=l.x+o.getWidth()&&c.x+s.getWidth()>=l.x&&c.y+s.getHeight()>=l.y&&c.y<=l.y+o.getHeight()?new W(s,o,n):null}createDamageSplats(t,i,n){const s=new U(t,i,this.assets.damageSplats,n);this.damageSplats.push(s)}updateStatus(t,i){t.setStatus(r.ATTACKING),t.setSprite(r.ATTACKING),i.setStatus(r.KNOCKBACKED),i.setSprite(r.KNOCKBACKED)}updateHealth(t,i){t.minusHealth(i)}updateDmgDealt(t,i){t.dmgDealt+=i}sortChoiceStats(t){return t.sort((i,n)=>n.health-i.health)}}C.\u0275fac=function(t){return new(t||C)(e.Y36(u),e.Y36(d))},C.\u0275cmp=e.Xpm({type:C,selectors:[["arena-of-choices-canvas-arena"]],viewQuery:function(t,i){if(1&t&&e.Gf(J,7),2&t){let n;e.iGM(n=e.CRH())&&(i.canvas=n.first)}},standalone:!0,features:[e.jDz],decls:10,vars:2,consts:[[1,"container"],["id","arena","width","960","height","720",1,"container__canvas"],["canvas",""],[1,"container__buttons"],[1,"container__button",3,"click"],[4,"ngIf"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"canvas",1,2),e._uU(3,"Canvas Section"),e.qZA(),e.TgZ(4,"div",3)(5,"button",4),e.NdJ("click",function(){return i.updateView()}),e._uU(6," Edit your choices "),e.qZA(),e.TgZ(7,"button",4),e.NdJ("click",function(){return i.onStart()}),e.YNc(8,q,2,0,"div",5),e.YNc(9,B,2,0,"div",5),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("ngIf",i.waiting),e.xp6(1),e.Q6J("ngIf",!i.waiting))},dependencies:[h.ez,h.O5],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.container__canvas[_ngcontent-%COMP%]{color:#fff;font-size:16px;border:1px solid white;width:960px;height:720px}.container__buttons[_ngcontent-%COMP%]{display:flex;gap:25px}.container__button[_ngcontent-%COMP%]{font-family:Permanent Marker,cursive;flex-grow:1;width:100%;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:36px;transition:.5s;background-color:#7692ff;color:#fff}.container__button[_ngcontent-%COMP%]:hover{transform:scale(1.05);cursor:pointer;background-color:#495a9c}@media only screen and (max-width: 1400px){.container__canvas[_ngcontent-%COMP%]{width:672px;height:504px}.container[_ngcontent-%COMP%]{justify-content:center;align-items:center}}@media only screen and (max-width: 1200px){.container__canvas[_ngcontent-%COMP%]{width:672px;height:504px}.container[_ngcontent-%COMP%]{justify-content:center;align-items:center}}@media only screen and (max-width: 800px){.container__canvas[_ngcontent-%COMP%]{width:480px;height:360px}}@media only screen and (max-width: 500px){.container__canvas[_ngcontent-%COMP%]{width:384px;height:288px}.container__button[_ngcontent-%COMP%]{font-size:18px}}"],changeDetection:0});var x=p(4825);class f{transform(t,i){return t.length>i?`${t.substring(0,i)}...`:t}}f.\u0275fac=function(t){return new(t||f)},f.\u0275pipe=e.Yjl({name:"customSlice",type:f,pure:!0,standalone:!0});const V=["canvas"];function X(a,t){if(1&a&&e._UZ(0,"div",10),2&a){const i=e.oxw(2);e.Udp("width",i.choiceStat.health,"%")}}const tt=function(a,t){return{background:a,color:t}};function et(a,t){if(1&a&&(e.ynx(0),e.TgZ(1,"div",1)(2,"div",2),e._UZ(3,"canvas",3,4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6),e._uU(7),e.ALo(8,"customSlice"),e.qZA(),e.TgZ(9,"div",7),e.YNc(10,X,1,2,"div",8),e.TgZ(11,"div",9),e._uU(12),e.qZA()()()(),e.BQk()),2&a){const i=t.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.WLB(8,tt,i.cardColor,i.cardTextColor)),e.xp6(6),e.AsE(" ",e.xi3(8,5,n.choiceStat.choice,15),": ",n.choiceStat.state," "),e.xp6(3),e.Q6J("ngIf",n.choiceStat.health>0),e.xp6(2),e.hij("",n.choiceStat.health,"%")}}class v{constructor(t){this.colorStore=t,this.colorPallete$=this.colorStore.colorPallete$}ngAfterViewInit(){this.canvas.nativeElement.getContext("2d").drawImage(this.choiceStat.images[0],0,0,80,80,0,0,300,150)}}v.\u0275fac=function(t){return new(t||v)(e.Y36(x.V))},v.\u0275cmp=e.Xpm({type:v,selectors:[["arena-of-choices-choice-stat-card"]],viewQuery:function(t,i){if(1&t&&e.Gf(V,5),2&t){let n;e.iGM(n=e.CRH())&&(i.canvas=n.first)}},inputs:{choiceStat:"choiceStat",health:"health"},standalone:!0,features:[e.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[1,"choice-stat-card",3,"ngStyle"],[1,"choice-stat-card__canvas-container"],[1,"choice-stat-card__canvas"],["canvas",""],[1,"choice-stat-card__info"],[1,"choice-stat-card__choice-name"],[1,"choice-stat-card__max-health"],["class","choice-stat-card__current-health",3,"width",4,"ngIf"],[1,"a"],[1,"choice-stat-card__current-health"]],template:function(t,i){1&t&&(e.YNc(0,et,13,11,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.colorPallete$))},dependencies:[h.ez,h.O5,h.PC,h.Ov,f],styles:['.choice-stat-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:10% 90%;grid-template-areas:"canvas info";align-items:center;padding:25px;background-color:#1e1e1e;color:#fff;height:auto;width:100%;border-radius:10px;position:relative;box-sizing:border-box}.choice-stat-card[_ngcontent-%COMP%]:before{background:radial-gradient(800px circle at 100px 100px,rgba(255,255,255,.06),transparent 40%);border-radius:inherit;content:"";height:100%;position:absolute;top:0;left:0;width:100%;z-index:2}.choice-stat-card__canvas-container[_ngcontent-%COMP%]{grid-area:canvas;grid-column:1;align-items:center;justify-content:center;display:flex;width:50px;height:50px}.choice-stat-card__canvas[_ngcontent-%COMP%]{width:50px;height:50px}.choice-stat-card__info[_ngcontent-%COMP%]{grid-area:info;grid-column:2;display:flex;font-size:24px;align-items:center;margin-left:25px;overflow-wrap:break-word;word-wrap:break-word;overflow:auto;flex-direction:column}.choice-stat-card__choice-name[_ngcontent-%COMP%]{width:100%}.choice-stat-card__max-health[_ngcontent-%COMP%]{box-sizing:border-box;flex:1 1;border:1px solid green;border-radius:10px;height:100%;min-height:50px;width:100%;position:relative}.choice-stat-card__current-health[_ngcontent-%COMP%]{background-color:green;border:1px solid transparent;border-radius:10px;height:50px}.a[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:24px;color:#000}'],changeDetection:0});const it=["canvas"];function nt(a,t){if(1&a&&(e.TgZ(0,"div",10),e._uU(1),e.qZA()),2&a){const i=e.oxw(2);e.xp6(1),e.hij(" Damage dealt: ",i.result.dmgDealt," ")}}function st(a,t){if(1&a&&(e.TgZ(0,"div",11),e._uU(1),e.qZA()),2&a){const i=e.oxw(2);e.xp6(1),e.hij(" Death number: ",i.numChoices===i.result.deathNumber?"Imagine dying lol":i.result.deathNumber," ")}}const at=function(a,t){return{background:a,color:t}};function ot(a,t){if(1&a&&(e.ynx(0),e.TgZ(1,"div",1)(2,"div",2),e._UZ(3,"canvas",3,4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6),e._uU(7),e.ALo(8,"customSlice"),e.qZA(),e.ynx(9,7),e.YNc(10,nt,2,1,"div",8),e.YNc(11,st,2,1,"div",9),e.BQk(),e.qZA()(),e.BQk()),2&a){const i=t.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.WLB(8,at,i.cardColor,i.cardTextColor)),e.xp6(6),e.hij(" ",e.xi3(8,5,n.result.name,15)," "),e.xp6(2),e.Q6J("ngSwitch",n.sortOrder),e.xp6(1),e.Q6J("ngSwitchCase","dmgDealt"),e.xp6(1),e.Q6J("ngSwitchCase","deathOrder")}}class y{constructor(t){this.colorStore=t,this.colorPallete$=this.colorStore.colorPallete$}ngAfterViewInit(){this.canvas.nativeElement.getContext("2d").drawImage(this.result.images[0],0,0,80,80,0,0,300,150)}}y.\u0275fac=function(t){return new(t||y)(e.Y36(x.V))},y.\u0275cmp=e.Xpm({type:y,selectors:[["arena-of-choices-choice-result"]],viewQuery:function(t,i){if(1&t&&e.Gf(it,5),2&t){let n;e.iGM(n=e.CRH())&&(i.canvas=n.first)}},inputs:{result:"result",sortOrder:"sortOrder",numChoices:"numChoices"},standalone:!0,features:[e.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[1,"result-container",3,"ngStyle"],[1,"result-container__canvas-container"],[1,"result-container__canvas"],["canvas",""],[1,"result-container__info"],[1,"result-container__name"],[3,"ngSwitch"],["class","result-container__dmg-dealt",4,"ngSwitchCase"],["class","result-container__death-order",4,"ngSwitchCase"],[1,"result-container__dmg-dealt"],[1,"result-container__death-order"]],template:function(t,i){1&t&&(e.YNc(0,ot,12,11,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.colorPallete$))},dependencies:[h.ez,h.O5,h.PC,h.RF,h.n9,h.Ov,f],styles:['.result-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:10% 90%;grid-template-areas:"canvas info";align-items:center;padding:25px;background-color:#1e1e1e;color:#fff;height:auto;width:100%;border-radius:10px;position:relative;box-sizing:border-box}.result-container__canvas-container[_ngcontent-%COMP%]{grid-area:canvas;grid-column:1;align-items:center;justify-content:center;display:flex;width:50px;height:50px}.result-container__info[_ngcontent-%COMP%]{grid-area:info;grid-column:2;display:flex;font-size:24px;align-items:center;margin-left:25px;overflow-wrap:break-word;word-wrap:break-word;overflow:auto;flex-direction:column}.result-container__canvas[_ngcontent-%COMP%]{width:50px;height:50px}'],changeDetection:0});var w=p(433);function ct(a,t){if(1&a&&e._UZ(0,"arena-of-choices-choice-result",10),2&a){const i=t.$implicit,n=e.oxw().$implicit,s=e.oxw(2);e.Q6J("result",i)("sortOrder",s.sortOrder)("numChoices",n.length)}}function rt(a,t){if(1&a&&(e.TgZ(0,"div",8),e.YNc(1,ct,1,3,"arena-of-choices-choice-result",9),e.qZA()),2&a){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",i)}}function ht(a,t){if(1&a){const i=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e._uU(2,"Results:"),e.qZA(),e.TgZ(3,"input",3),e.NdJ("ngModelChange",function(s){e.CHM(i);const o=e.oxw();return e.KtG(o.sortOrder=s)})("change",function(){const o=e.CHM(i).$implicit,c=e.oxw();return e.KtG(c.sortResults(c.sortOrder,o))}),e.qZA(),e.TgZ(4,"label",4),e._uU(5,"Death Order"),e.qZA(),e.TgZ(6,"input",5),e.NdJ("ngModelChange",function(s){e.CHM(i);const o=e.oxw();return e.KtG(o.sortOrder=s)})("change",function(){const o=e.CHM(i).$implicit,c=e.oxw();return e.KtG(c.sortResults(c.sortOrder,o))}),e.qZA(),e.TgZ(7,"label",6),e._uU(8,"Damage Dealt"),e.qZA(),e.YNc(9,rt,2,1,"div",7),e.ALo(10,"async"),e.qZA()}if(2&a){const i=e.oxw();e.xp6(3),e.Q6J("ngModel",i.sortOrder),e.xp6(3),e.Q6J("ngModel",i.sortOrder),e.xp6(3),e.Q6J("ngIf",e.lcZ(10,3,i.choices$))}}class T{constructor(t){this.choiceToolStore=t,this.sortOrder="deathOrder",this.results$=this.choiceToolStore.choiceResults$,this.choices$=this.choiceToolStore.choices$}sortResults(t,i){switch(t){case"deathOrder":i.sort((n,s)=>s.deathNumber-n.deathNumber);break;case"dmgDealt":i.sort((n,s)=>s.dmgDealt-n.dmgDealt)}}}function lt(a,t){if(1&a&&e._UZ(0,"arena-of-choices-choice-stat-card",5),2&a){const i=t.$implicit;e.Q6J("choiceStat",i)("health",i.health)}}T.\u0275fac=function(t){return new(t||T)(e.Y36(d))},T.\u0275cmp=e.Xpm({type:T,selectors:[["arena-of-choices-canvas-results"]],standalone:!0,features:[e.jDz],decls:2,vars:3,consts:[["class","result-container",4,"ngIf"],[1,"result-container"],[1,"result-container__header"],["type","radio","id","deathOrder","name","deathOrder","value","deathOrder",3,"ngModel","ngModelChange","change"],["for","deathOrder"],["type","radio","id","dmgDealt","name","dmgDealt","value","dmgDealt",3,"ngModel","ngModelChange","change"],["for","dmgDealt"],["class","result-container__results",4,"ngIf"],[1,"result-container__results"],[3,"result","sortOrder","numChoices",4,"ngFor","ngForOf"],[3,"result","sortOrder","numChoices"]],template:function(t,i){1&t&&(e.YNc(0,ht,11,5,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.results$))},dependencies:[h.ez,h.sg,h.O5,h.Ov,y,w.u5,w.Fj,w._,w.JJ,w.On],styles:[".result-container__results[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;text-align:center}.result-container__header[_ngcontent-%COMP%]{font-size:24px}"],changeDetection:0});class b{constructor(t){this.choiceToolStore=t,this.choiceStats$=this.choiceToolStore.choiceStats$,this.gameFinished$=this.choiceToolStore.gameFinished$}}b.\u0275fac=function(t){return new(t||b)(e.Y36(d))},b.\u0275cmp=e.Xpm({type:b,selectors:[["arena-of-choices-canvas-section"]],standalone:!0,features:[e.jDz],decls:8,vars:3,consts:[[1,"canvas-container"],[1,"canvas-container__wrapper"],[1,"canvas-container__choice-stats"],[3,"choiceStat","health",4,"ngFor","ngForOf"],[1,"canvas-container__results"],[3,"choiceStat","health"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"arena-of-choices-canvas-arena"),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,lt,1,2,"arena-of-choices-choice-stat-card",3),e.ALo(5,"async"),e.TgZ(6,"div",4),e._UZ(7,"arena-of-choices-canvas-results"),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("ngForOf",e.lcZ(5,1,i.choiceStats$)))},dependencies:[h.ez,h.sg,h.Ov,C,v,T],styles:[".canvas-container[_ngcontent-%COMP%]{height:100%;width:100%;background-color:inherit;display:flex;gap:24px;margin:24px}.canvas-container__choice-stats[_ngcontent-%COMP%]{flex-wrap:wrap;flex:1 1;gap:10px;overflow:auto;margin-bottom:100px;padding:0 10px;max-height:100svh;height:100%}@media only screen and (max-width: 1200px){.canvas-container[_ngcontent-%COMP%]{flex-direction:column;margin:0}arena-of-choices-choice-stat-card[_ngcontent-%COMP%]{flex:1 1 50%;max-width:50%;padding:20px 20px 20px 0}.canvas-container__choice-stats[_ngcontent-%COMP%]{margin:0 15%}}arena-of-choices-choice-stat-card[_ngcontent-%COMP%]{flex:1 1 30%;max-width:30%;padding:20px 20px 20px 0}arena-of-choices-canvas-arena[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center}"],changeDetection:0});const dt=function(a){return{color:a}};function gt(a,t){if(1&a){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"label",2)(3,"input",3,4),e.NdJ("keyup.enter",function(){e.CHM(i);const s=e.MAs(4);return e.oxw().addChoice(s.value),e.KtG(s.value="")}),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){e.CHM(i);const s=e.MAs(4);return e.oxw().addChoice(s.value),e.KtG(s.value="")}),e._uU(6," Add choice "),e.qZA()()(),e.BQk()}if(2&a){const i=t.$implicit;e.xp6(5),e.Q6J("ngStyle",e.VKq(1,dt,i.textColor))}}class A{constructor(t,i,n){this.choiceToolStore=t,this.assetManager=i,this.colorStore=n,this.numChoices=0,this.colorPallete$=this.colorStore.colorPallete$}addChoice(t){if(!t.trim())return;const i=this.assetManager.getRandomCharacterAsset(),n=this.assetManager.getCharacterAssets(i);null!==n&&(this.choiceToolStore.addChoice({id:this.numChoices,name:t,images:n,type:i}),this.numChoices+=1)}}A.\u0275fac=function(t){return new(t||A)(e.Y36(d),e.Y36(u),e.Y36(x.V))},A.\u0275cmp=e.Xpm({type:A,selectors:[["arena-of-choices-choice-input-text-input"]],standalone:!0,features:[e.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[1,"text-input"],[1,"text-input__label"],["type","text","placeholder","Enter choice...",1,"text-input__input",3,"keyup.enter"],["choice",""],[1,"text-input__button",3,"ngStyle","click"]],template:function(t,i){1&t&&(e.YNc(0,gt,7,3,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.colorPallete$))},dependencies:[h.ez,h.O5,h.PC,h.Ov],styles:[".text-input[_ngcontent-%COMP%]{width:100%;border-top:20px solid transparent}.text-input__label[_ngcontent-%COMP%]{display:flex}.text-input__input[_ngcontent-%COMP%]{padding:5px;font-size:48px;width:100%;border-radius:5px;font-family:Permanent Marker,cursive}.text-input__input[_ngcontent-%COMP%]:focus{outline:none}.text-input__button[_ngcontent-%COMP%]{background-color:transparent;border:none;font-family:Permanent Marker,cursive;font-size:24px;border:1px solid #7692ff;border-radius:5px;width:20%;margin-left:16px;transition:.5s background-color;background-color:#7692ff}.text-input__button[_ngcontent-%COMP%]:hover{background-color:#495a9c}.text-input__button[_ngcontent-%COMP%]:active{background-color:#7692ff;color:#000}@media only screen and (max-width: 800px){.text-input__input[_ngcontent-%COMP%]{font-size:24px}.text-input__button[_ngcontent-%COMP%]{font-size:12px}}"],changeDetection:0});const pt=["canvas"],ut=function(a,t){return{background:a,color:t}};function mt(a,t){if(1&a){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2),e._UZ(3,"canvas",3,4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6),e._uU(7),e.qZA()(),e.TgZ(8,"div",7),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.deleteSelf())}),e._uU(9,"\u2716"),e.qZA()(),e.BQk()}if(2&a){const i=t.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.WLB(2,ut,i.cardColor,i.cardTextColor)),e.xp6(6),e.Oqu(n.choice.name)}}class S{constructor(t,i){this.colorStore=t,this.choiceToolStore=i,this.lastTime=0,this.characterStates=[r.ATTACKING,r.RUNNING,r.WAITING],this.colorPallete$=this.colorStore.colorPallete$,this.characterState=this.getRandomState()}ngOnInit(){}ngAfterViewInit(){switch(this.ctx=this.canvas.nativeElement.getContext("2d"),this.ctx.clearRect(0,0,this.canvas.nativeElement.width,this.canvas.nativeElement.height),this.choice.type){case"firzen":default:this.character=new D(150,150,"a",{x:0,y:0},1,this.choice.images,this.ctx);break;case"justin":this.character=new G(150,150,"a",{x:0,y:0},1,this.choice.images,this.ctx);break;case"woody":this.character=new R(150,150,"a",{x:0,y:0},1,this.choice.images,this.ctx);break;case"henry":this.character=new L(150,150,"a",{x:0,y:0},1,this.choice.images,this.ctx)}this.character.setFacing(g.RIGHT),this.character.setStatus(this.characterState),this.character.setSprite(this.characterState),this.drawLoop(0)}drawLoop(t){const i=t-this.lastTime;this.lastTime=t,this.ctx.clearRect(0,0,this.canvas.nativeElement.width,this.canvas.nativeElement.height),this.character.drawSpriteCard(this.ctx,this.characterState,i,300,150);const n=this.drawLoop.bind(this);requestAnimationFrame(n)}deleteSelf(){this.choiceToolStore.removeChoiceById(this.choice.id)}getRandomState(){return this.characterStates[Math.floor(Math.random()*this.characterStates.length)]}}S.\u0275fac=function(t){return new(t||S)(e.Y36(x.V),e.Y36(d))},S.\u0275cmp=e.Xpm({type:S,selectors:[["arena-of-choices-choice-input-card"]],viewQuery:function(t,i){if(1&t&&e.Gf(pt,5),2&t){let n;e.iGM(n=e.CRH())&&(i.canvas=n.first)}},inputs:{choice:"choice"},standalone:!0,features:[e.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[1,"input-card",3,"ngStyle"],[1,"input-card__canvas-container"],[1,"input-card__canvas"],["canvas",""],[1,"input-card__info"],[1,"input-card__choice-name"],[1,"input-card__delete",3,"click"]],template:function(t,i){1&t&&(e.YNc(0,mt,10,5,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.colorPallete$))},dependencies:[h.ez,h.O5,h.PC,h.Ov],styles:['.input-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:20% 80%;grid-template-areas:"canvas info";padding:25px;height:100%;width:100%;border-radius:10px;position:relative;box-sizing:border-box}.input-card[_ngcontent-%COMP%]:hover   .input-card__info[_ngcontent-%COMP%]{transform:translate(25px)}.input-card[_ngcontent-%COMP%]:hover   .input-card__canvas[_ngcontent-%COMP%]{transform:scale(1.1)}.input-card__canvas-container[_ngcontent-%COMP%]{grid-area:canvas;grid-column:1;align-items:center;justify-content:center;display:flex}.input-card__canvas[_ngcontent-%COMP%]{width:150px;height:150px;transition:transform .5s}.input-card__info[_ngcontent-%COMP%]{grid-area:info;grid-column:2;display:flex;font-size:48px;align-items:center;margin-left:25px;overflow-wrap:break-word;word-wrap:break-word;overflow:auto;transition:transform .5s}.input-card__choice-name[_ngcontent-%COMP%]{max-width:100%}.input-card__delete[_ngcontent-%COMP%]{position:absolute;top:0;right:0;font-size:24px;padding:inherit;z-index:2;transition:.5s}.input-card__delete[_ngcontent-%COMP%]:hover{transform:rotate(360deg) scale(1.4);cursor:pointer}'],changeDetection:0});const ft=["subtext"];class O{constructor(t,i){this.choiceStore=t,this.renderer=i}ngAfterViewInit(){this.createSubtext("Lets go to the arena!")}onClick(){this.choiceStore.updateView("canvas"),this.choiceStore.updateGenerateCharacters(!0)}createWord(t,i){const n=this.renderer.createElement("span");return n.innerHTML=`${t}`,n.classList.add("card-subtext-word"),this.renderer.setStyle(n,"transitionDelay",40*i+"ms"),n}addWord(t,i){this.renderer.appendChild(this.subtext.nativeElement,this.createWord(t,i))}createSubtext(t){const i=this.addWord.bind(this);t.split(" ").map(i)}}function _t(a,t){1&a&&e._UZ(0,"arena-of-choices-choice-input-card",12),2&a&&e.Q6J("choice",t.$implicit)}function Ct(a,t){if(1&a&&(e.TgZ(0,"div",9)(1,"arena-of-choices-make-choices-card",10),e._uU(2,"Make a Choice!"),e.qZA(),e.YNc(3,_t,1,1,"arena-of-choices-choice-input-card",11),e.qZA()),2&a){const i=e.oxw().$implicit;e.xp6(3),e.Q6J("ngForOf",i)}}function xt(a,t){1&a&&(e.TgZ(0,"div",13),e._uU(1," Enter some choices! "),e.qZA())}function vt(a,t){if(1&a&&(e.TgZ(0,"div",5)(1,"div",6),e.YNc(2,Ct,4,1,"div",7),e.YNc(3,xt,2,0,"div",8),e.qZA()()),2&a){const i=t.$implicit;e.xp6(2),e.Q6J("ngIf",i.length>0),e.xp6(1),e.Q6J("ngIf",0===i.length)}}O.\u0275fac=function(t){return new(t||O)(e.Y36(d),e.Y36(e.Qsj))},O.\u0275cmp=e.Xpm({type:O,selectors:[["arena-of-choices-make-choices-card"]],viewQuery:function(t,i){if(1&t&&e.Gf(ft,5),2&t){let n;e.iGM(n=e.CRH())&&(i.subtext=n.first)}},standalone:!0,features:[e.jDz],decls:5,vars:0,consts:[[1,"container",3,"click"],[1,"container__text"],[1,"container__subtext"],["subtext",""]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return i.onClick()}),e.TgZ(1,"div",1),e._uU(2,"Make my choice!"),e.qZA(),e._UZ(3,"div",2,3),e.qZA())},dependencies:[h.ez],styles:['.container[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:10px;display:flex;flex-direction:column;align-items:center;position:relative;justify-content:center;font-size:48px;transition:.5s;color:#fff;text-align:center;border:3px solid var(--g2);cursor:pointer;--g1: #f5f5f5;--g2: #7692ff;--g3: #091540}.container[_ngcontent-%COMP%]:before{background:linear-gradient(130deg,transparent 0% 33%,var(--g1) 66%,var(--g2) 83.5%,var(--g3) 100%);content:"";height:100%;left:0;position:absolute;top:0;width:100%;background-position:0% 0%;background-size:300% 300%;transition:background-position .35s ease;border-radius:10px;z-index:1}.container[_ngcontent-%COMP%]:hover:before{background-position:100% 100%;transform:scale(1.08,1.03)}.container[_ngcontent-%COMP%]:hover > .container__subtext[_ngcontent-%COMP%] > .card-subtext-word[_ngcontent-%COMP%]{visibility:visible;opacity:1;transform:translate(0);transition:opacity 0ms,transform .2s cubic-bezier(.9,.06,.15,.9)}.container__text[_ngcontent-%COMP%], .container__subtext[_ngcontent-%COMP%]{z-index:2}.container__subtext[_ngcontent-%COMP%]{font-size:24px}.card-subtext-word[_ngcontent-%COMP%]{display:inline-block;margin:0vmin .3vmin;position:relative;transform:translateY(40%);transition:none;opacity:0}'],changeDetection:0});class k{constructor(t){this.choiceToolStore=t,this.choices$=this.choiceToolStore.choices$}}function yt(a,t){1&a&&e._UZ(0,"arena-of-choices-choice-input-section")}function wt(a,t){1&a&&e._UZ(0,"arena-of-choices-canvas-section")}function Tt(a,t){if(1&a&&(e.TgZ(0,"div",1)(1,"div",2),e.YNc(2,yt,1,0,"arena-of-choices-choice-input-section",3),e.YNc(3,wt,1,0,"arena-of-choices-canvas-section",3),e.qZA()()),2&a){const i=t.$implicit;e.xp6(1),e.Q6J("ngSwitch",i),e.xp6(1),e.Q6J("ngSwitchCase","choice"),e.xp6(1),e.Q6J("ngSwitchCase","canvas")}}k.\u0275fac=function(t){return new(t||k)(e.Y36(d))},k.\u0275cmp=e.Xpm({type:k,selectors:[["arena-of-choices-choice-input-section"]],standalone:!0,features:[e.jDz],decls:8,vars:3,consts:[[1,"input"],["data-value","ENTER ALL YOUR CHOICES!","arenaOfChoicesHackerEffect","",1,"input__list-title"],["header",""],[1,"input__text-area"],["class","input__list-area",4,"ngIf"],[1,"input__list-area"],[1,"input__list-choices-body"],["class","input__list-cards",4,"ngIf"],["class","input__empty-list",4,"ngIf"],[1,"input__list-cards"],[1,"input__go"],[3,"choice",4,"ngFor","ngForOf"],[3,"choice"],[1,"input__empty-list"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1,2),e._uU(3," ENTER ALL YOUR CHOICES! "),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"arena-of-choices-choice-input-text-input"),e.qZA(),e.YNc(6,vt,4,2,"div",4),e.ALo(7,"async"),e.qZA()),2&t&&(e.xp6(6),e.Q6J("ngIf",e.lcZ(7,1,i.choices$)))},dependencies:[h.ez,h.sg,h.O5,h.Ov,A,S,O,m],styles:[".input[_ngcontent-%COMP%]{min-height:100%;background-color:inherit;color:inherit;display:flex;flex-direction:column;padding-top:20px;width:100%}.input__text-area[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin:80px;text-align:center}.input__list-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;gap:10px}.input__list-title[_ngcontent-%COMP%]{display:flex;font-size:64px;justify-content:center;text-align:center}.input__list-choices-body[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:0 50px 50px;flex-grow:1;border-radius:10px}.input__list-cards[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;padding-left:30px;height:100%}.input__empty-list[_ngcontent-%COMP%]{display:flex;font-size:32px}arena-of-choices-choice-input-text-input[_ngcontent-%COMP%], .input__go[_ngcontent-%COMP%]{width:100%}arena-of-choices-choice-input-card[_ngcontent-%COMP%], .input__go[_ngcontent-%COMP%]{flex:1 1 33%;max-width:33%;padding:20px 20px 20px 0}@media only screen and (min-width: 3000px){arena-of-choices-choice-input-card[_ngcontent-%COMP%], .input__go[_ngcontent-%COMP%]{flex:1 1 25%;max-width:25%;padding:20px 20px 20px 0}}@media only screen and (max-width: 1200px){arena-of-choices-choice-input-card[_ngcontent-%COMP%], .input__go[_ngcontent-%COMP%]{flex:1 1 50%;max-width:50%;padding:20px 20px 20px 0}}@media only screen and (max-width: 800px){arena-of-choices-choice-input-card[_ngcontent-%COMP%], .input__go[_ngcontent-%COMP%]{flex:1 1 100%;max-width:100%;padding:20px 20px 20px 0}.input__list-title[_ngcontent-%COMP%]{font-size:32px}.input__list-choices-body[_ngcontent-%COMP%]{margin:0 10px 10px}.input__text-area[_ngcontent-%COMP%]{margin:20px}}"],changeDetection:0});class I{constructor(t){this.choiceToolStore=t,this.view$=this.choiceToolStore.view$}}I.\u0275fac=function(t){return new(t||I)(e.Y36(d))},I.\u0275cmp=e.Xpm({type:I,selectors:[["arena-of-choices-choice-tool"]],standalone:!0,features:[e._Bn([d]),e.jDz],decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(t,i){1&t&&(e.YNc(0,Tt,4,3,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.view$))},dependencies:[h.ez,h.O5,h.RF,h.n9,h.Ov,b,k],styles:[".container[_ngcontent-%COMP%]{background-color:inherit;color:inherit;min-height:100svh;display:flex;flex-direction:column;width:100%}arena-of-choices-choice-input-section[_ngcontent-%COMP%], arena-of-choices-canvas-section[_ngcontent-%COMP%]{height:100svh;display:flex;background-color:inherit}@media only screen and (max-width: 1200px){arena-of-choices-choice-input-section[_ngcontent-%COMP%], arena-of-choices-canvas-section[_ngcontent-%COMP%]{height:auto}}"],changeDetection:0});class M{constructor(t){this.el=t}ngAfterViewInit(){this.observer.observe(this.el.nativeElement)}}M.\u0275fac=function(t){return new(t||M)(e.Y36(e.SBq))},M.\u0275dir=e.lG2({type:M,selectors:[["","arenaOfChoicesObserverChild",""]],inputs:{observer:"observer"},standalone:!0});const bt=function(a,t){return{background:a,color:t}};function At(a,t){if(1&a&&(e.ynx(0),e.TgZ(1,"div",1,2),e._UZ(3,"arena-of-choices-landing-section",3)(4,"arena-of-choices-choice-tool",4),e.qZA(),e.BQk()),2&a){const i=t.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.WLB(3,bt,i.bg,i.textColor)),e.xp6(2),e.Q6J("observer",n.observer),e.xp6(1),e.Q6J("observer",n.observer)}}class P{constructor(t){this.colorStore=t,this.colorPallete1={bg:"#f5f5f5",textColor:"#000000",cardColor:"#091540",cardTextColor:"#ffffff"},this.colorPallete2={bg:"#091540",textColor:"#ffffff",cardColor:"#f5f5f5",cardTextColor:"#000000"},this.callback=i=>{i.forEach(n=>{if(n.isIntersecting)switch(n.target.dataset.color){case"pallete1":this.colorStore.updateColorPallete(this.colorPallete1),document.body.style.background=this.colorPallete1.bg;break;case"pallete2":this.colorStore.updateColorPallete(this.colorPallete2),document.body.style.background=this.colorPallete2.bg}})},this.observer=new IntersectionObserver(this.callback,{threshold:.5}),this.colorPallete$=this.colorStore.colorPallete$}}P.\u0275fac=function(t){return new(t||P)(e.Y36(x.V))},P.\u0275cmp=e.Xpm({type:P,selectors:[["arena-of-choices-home"]],standalone:!0,features:[e.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[1,"container",3,"ngStyle"],["container",""],["arenaOfChoicesObserverChild","","data-color","pallete1",3,"observer"],["arenaOfChoicesObserverChild","","data-color","pallete2",3,"observer"]],template:function(t,i){1&t&&(e.YNc(0,At,5,6,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.colorPallete$))},dependencies:[h.ez,h.O5,h.PC,h.Ov,_,I,M],styles:["arena-of-choices-landing-section[_ngcontent-%COMP%]{font-family:Permanent Marker,cursive}arena-of-choices-choice-tool[_ngcontent-%COMP%]{display:block;max-height:100svh;background-color:inherit}.container[_ngcontent-%COMP%]{transition:.5s background-color;width:100%;height:100%}"]})}}]);